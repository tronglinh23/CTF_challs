var WSB;(function(n){var t;(function(t){function c(t){f=t;i=new n.CancellationManager}function e(t,f){if(u){t&&t();u=!1;s();var e=y();n.fetchUrl(e,n.Host.getCustomHeaders(null),null,function(n){if(n.status>=400){r();return}s({flyoutUrl:e,innerHtml:n.responseText,launchUri:function(n,t,i){a(n,f,t,i)},onBlur:function(){return r()}})},i)}else r()}function l(){var t;return(n.revIpRegionCache===null||n.revIpRegionCache===void 0?void 0:n.revIpRegionCache.length)==2&&((t=n.getCurrentLanguage())===null||t===void 0?void 0:t.toLowerCase().endsWith(n.revIpRegionCache.toLowerCase()))}function o(){return n.config.supportedRewardsFlyoutMarkets["*"]||n.config.supportedRewardsFlyoutMarkets[n.getCurrentLanguage().toLowerCase()]&&l()}function a(t,f,s,h){return n.config.rewFly&&o()&&t.match(/fd\/auth\/signin/)?(t=t.replace("BINGIP","CORTIP").replace("BINGTRIAL5TO250P201808","MULTIWSBACQ201910"),n.fetchUrl(t,n.Host.getCustomHeaders(null),null,function(n){if(n.status>=400){r();return}u=!0;e(null,f)},i)):(f(s,h),n.Host.launchUri(v(t)))}function v(n){return"".concat(n).concat(n.indexOf("?")>0?"&":"?").concat(h)}function y(){var t=n.Host.getWindowsTheme()==2?"&isDarkMode=1":"",i="&ver=".concat(_G.AppVer,"&IID=RewardsFlyout.1000&IG=").concat(_G.IG),r="&cvid=".concat(n.Host.getConversationId());return"".concat("/rewardsapp/flyout?channel=0&partnerid=windowssearchbox").concat(t).concat(i).concat(r)}function s(t){t===void 0&&(t=null);var i=_ge("rewardsBadgeButton");i&&(i.blur(),i.setAttribute("aria-expanded","true"));t=t||{};t.loadingText=n.Host.getLocString("Loading");f.updateRewardsFlyout(t)}function r(){i&&i.cancelAll(!1);var t=_ge("rewardsBadgeButton");t&&(t.blur(),t.setAttribute("aria-expanded","false"));f.updateRewardsFlyout(null);n.safeSetTimeout(function(){u=!0},500,"hideRewardsFlyout")}var h="ref=WSB",u=!0,f,i;t.init=c;t.toggleRewardsFlyout=e;t.EnabledMarketAndRegion=o;t.hideRewardsFlyout=r})(t=n.RewardsFlyoutViewModel||(n.RewardsFlyoutViewModel={}))})(WSB||(WSB={}))